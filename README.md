# çº¿ç¨‹æ± å¼‚æ­¥æ—¥å¿—å¤„ç†åº“

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºŽCè¯­è¨€å®žçŽ°çš„é«˜æ•ˆçº¿ç¨‹æ± æ—¥å¿—å¤„ç†åº“ï¼Œé‡‡ç”¨ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡åž‹å®žçŽ°å¼‚æ­¥æ—¥å¿—è®°å½•ã€‚é€šè¿‡çº¿ç¨‹æ± ç®¡ç†æ—¥å¿—å†™å…¥ä»»åŠ¡ï¼Œæœ‰æ•ˆæå‡ç³»ç»Ÿæ€§èƒ½ï¼Œé¿å…åŒæ­¥æ—¥å¿—é€ æˆçš„I/Oé˜»å¡žé—®é¢˜ã€‚

## æ ¸å¿ƒåŠŸèƒ½
âœ… **çº¿ç¨‹æ± ç®¡ç†**  
- æ”¯æŒè‡ªå®šä¹‰çº¿ç¨‹æ•°é‡ï¼ˆé»˜è®¤10çº¿ç¨‹ï¼‰
- è‡ªåŠ¨ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
- ä¼˜é›…åœæœºæœºåˆ¶ï¼ˆSIGINTä¿¡å·å¤„ç†ï¼‰

âœ… **å¼‚æ­¥æ—¥å¿—å¤„ç†**  
- æ”¯æŒ5ç§æ—¥å¿—ç±»åž‹ï¼šERROR/INFO/RUN/INET/MEM
- æ¯ç§æ—¥å¿—ç±»åž‹ç‹¬ç«‹æ–‡ä»¶å­˜å‚¨
- è‡ªå¸¦æ—¶é—´æˆ³å’Œè¿›ç¨‹/çº¿ç¨‹ä¿¡æ¯

âœ… **çº¿ç¨‹å®‰å…¨æœºåˆ¶**  
- æ¯ä¸ªæ—¥å¿—ç±»åž‹ç‹¬ç«‹äº’æ–¥é”
- æ— é”é˜Ÿåˆ—ç®¡ç†ä»»åŠ¡
- æ¡ä»¶å˜é‡å®žçŽ°é«˜æ•ˆä»»åŠ¡é€šçŸ¥

## æ ¸å¿ƒä¼˜åŠ¿
ðŸš€ **é«˜æ€§èƒ½**
- ä»»åŠ¡æäº¤ä¸Žæ‰§è¡Œè§£è€¦ï¼Œæœ€é«˜å¯è¾¾10ä¸‡æ—¥å¿—/ç§’ï¼ˆå–å†³äºŽç£ç›˜é€Ÿåº¦ï¼‰
- é¿å…ç›´æŽ¥I/Oé˜»å¡žä¸»çº¿ç¨‹

ðŸ”’ **é«˜å¯é æ€§**
- å´©æºƒå‰è‡ªåŠ¨åˆ·æ–°æ—¥å¿—ç¼“å­˜
- åŽŸå­åŒ–æ—¥å¿—å†™å…¥æ“ä½œ
- å¤šçº§é”™è¯¯å¤„ç†æœºåˆ¶

ðŸ”§ **é«˜æ‰©å±•æ€§**
- æ˜“äºŽæ·»åŠ æ–°æ—¥å¿—ç±»åž‹
- æ”¯æŒè‡ªå®šä¹‰æ—¥å¿—æ ¼å¼
- çµæ´»çš„ä»»åŠ¡å¤„ç†æœºåˆ¶

## å¿«é€Ÿå¼€å§‹
```bash
# ç¼–è¯‘
gcc -o logger main.c -lpthread

# è¿è¡Œï¼ˆé»˜è®¤æ¯ç§’äº§ç”Ÿä¸€æ¡ERRORæ—¥å¿—ï¼‰
./logger

# ä¼˜é›…é€€å‡º
Ctrl+C å‘é€SIGINTä¿¡å·
```

## ä½¿ç”¨ç¤ºä¾‹
```c
// åˆå§‹åŒ–çº¿ç¨‹æ± 
struct thread_pool *pool = thread_pool_create(8);

// æäº¤æ—¥å¿—ä»»åŠ¡
struct Err_info msg = {ERROR_TYPE, "Disk write failure"};
log_gn(msg);

// ç¨‹åºé€€å‡ºæ—¶
thread_pool_destroy(pool);
```

## ä¼˜åŒ–æ–¹å‘
### åŠŸèƒ½å¢žå¼º
ðŸ› ï¸ åŠ¨æ€çº¿ç¨‹è°ƒèŠ‚ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©ç¼©å®¹çº¿ç¨‹æ±   
ðŸ› ï¸ æ—¥å¿—æ»šåŠ¨ç­–ç•¥ï¼šæŒ‰å¤§å°/æ—¶é—´è‡ªåŠ¨åˆ†å‰²æ—¥å¿—æ–‡ä»¶  
ðŸ› ï¸ å¼‚æ­¥I/Oä¼˜åŒ–ï¼šç»“åˆlibaioå®žçŽ°æ›´é«˜æ•ˆå†™å…¥

### æ€§èƒ½ä¼˜åŒ–
âš¡ æ— é”é˜Ÿåˆ—å®žçŽ°ï¼šæ›¿æ¢å½“å‰çš„äº’æ–¥é”æ–¹æ¡ˆ  
âš¡ æ‰¹é‡å†™å…¥æœºåˆ¶ï¼šåˆå¹¶å¤šä¸ªæ—¥å¿—æ¡ç›®ä¸€æ¬¡æ€§å†™å…¥  
âš¡ å†…å­˜æ± ä¼˜åŒ–ï¼šé¢„åˆ†é…ä»»åŠ¡å†…å­˜å‡å°‘mallocå¼€é”€

### å¯é æ€§æå‡
ðŸ” å¼‚å¸¸æ¢å¤æœºåˆ¶ï¼šæ—¥å¿—æ–‡ä»¶æŸåæ—¶è‡ªåŠ¨é‡å»º  
ðŸ” å†™å…¥å¤±è´¥é‡è¯•ï¼šç½‘ç»œå­˜å‚¨åœºæ™¯ä¸‹çš„å®¹é”™å¤„ç†  
ðŸ” å†…å­˜ä¿æŠ¤ï¼šé˜²æ­¢å†…å­˜æ³„æ¼çš„å®ˆæŠ¤çº¿ç¨‹

### æ‰©å±•åŠŸèƒ½
ðŸŒ ç½‘ç»œæ—¥å¿—æ”¯æŒï¼šUDP/TCPæ—¥å¿—è½¬å‘  
ðŸ“Š ç›‘æŽ§æŽ¥å£ï¼šæš´éœ²çº¿ç¨‹æ± çŠ¶æ€æŒ‡æ ‡  
ðŸ“ åŽ‹ç¼©å½’æ¡£ï¼šè‡ªåŠ¨åŽ‹ç¼©åŽ†å²æ—¥å¿—æ–‡ä»¶

## æž¶æž„å›¾
```
+-----------------+     +-------------------+     +---------------+
|     åº”ç”¨ç¨‹åº     | --> |   çº¿ç¨‹æ± -ä»»åŠ¡é˜Ÿåˆ—  | --> |    å·¥ä½œçº¿ç¨‹    |
|                 |     |                   |     |               |
+-----------------+     +-------------------+     +-------+-------+
                                                          |
                                                          v
                                                    +------------+
                                                    |  æ—¥å¿—è®°å½•   |
                                                    |            |
                                                    +------------+
```
